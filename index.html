
<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<title>Cofit ç›´æ’­æŠ½çç³»çµ±</title>
<style>
body{
    font-family: "Microsoft JhengHei", sans-serif;
    background: linear-gradient(135deg,#004f51,#0a9396);
    color:white;
    text-align:center;
    padding:30px;
}
textarea{
    width:90%;
    height:200px;
    margin:20px 0;
    border-radius:10px;
    padding:10px;
}
button, select, input{
    padding:10px;
    margin:5px;
    border-radius:8px;
    border:none;
}
#winner{
    font-size:36px;
    margin-top:30px;
    font-weight:bold;
}
.small{
    font-size:14px;
    opacity:0.8;
}
</style>
</head>
<body>

<h1>ğŸ‰ Cofit ç›´æ’­æŠ½çç³»çµ± ğŸ‰</h1>

<div class="small">è«‹è²¼ä¸Š Google Meet èŠå¤©ç´€éŒ„ï¼ˆåå­— / æ™‚é–“ / ç•™è¨€ æ ¼å¼ï¼‰</div>

<textarea id="chatInput" placeholder="åœ¨é€™è£¡è²¼ä¸ŠèŠå¤©å…§å®¹..."></textarea><br>

<button onclick="parseNames()">è§£æåå–®</button>

<div id="countArea"></div>

<br>

<label>æŠ½å‡ºå¹¾ä½ï¼š</label>
<select id="winnerCount">
  <option value="1">1 ä½</option>
  <option value="2">2 ä½</option>
  <option value="3">3 ä½</option>
  <option value="5">5 ä½</option>
</select>

<br>

<label>çå“åç¨±ï¼š</label>
<input type="text" id="prizeName" placeholder="è«‹è¼¸å…¥çå“åç¨±">

<br>

<button onclick="drawLottery()">é–‹å§‹æŠ½ç</button>

<div id="winner"></div>

<script>
let uniqueNames = [];

function parseNames(){
    const text = document.getElementById("chatInput").value.trim();
    const lines = text.split("\n").filter(l => l.trim() !== "");
    uniqueNames = [];

    for(let i=0; i < lines.length; i++){
        if(i % 3 === 0){
            const name = lines[i].trim();
            if(!uniqueNames.includes(name)){
                uniqueNames.push(name);
            }
        }
    }

    document.getElementById("countArea").innerHTML =
        "ç›®å‰æœ‰æ•ˆæŠ½çäººæ•¸ï¼š" + uniqueNames.length + " äºº";
}

function drawLottery(){
    if(uniqueNames.length === 0){
        alert("è«‹å…ˆè§£æåå–®ï¼");
        return;
    }

    const count = parseInt(document.getElementById("winnerCount").value);
    const prize = document.getElementById("prizeName").value || "ç¥ç§˜å¥½ç¦®";

    if(count > uniqueNames.length){
        alert("æŠ½çäººæ•¸è¶…éåƒåŠ äººæ•¸ï¼");
        return;
    }

    let pool = [...uniqueNames];
    let winners = [];

    for(let i=0; i<count; i++){
        const randomIndex = Math.floor(Math.random()*pool.length);
        winners.push(pool[randomIndex]);
        pool.splice(randomIndex,1);
    }

    document.getElementById("winner").innerHTML =
        "ğŸ† æ­å–œå¾—çè€… ğŸ†<br>" +
        winners.join("<br>") +
        "<br><br>çå“ï¼š" + prize;
}
</script>

</body>
</html>
